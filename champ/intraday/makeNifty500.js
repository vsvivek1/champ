const nifty500=[
    "360ONE",
    "3MINDIA",
    "ABB",
    "ACC",
    "AIAENG",
    "APLAPOLLO",
    "AUBANK",
    "AADHARHFC",
    "AARTIIND",
    "AAVAS",
    "ABBOTINDIA",
    "ACE",
    "ADANIENSOL",
    "ADANIENT",
    "ADANIGREEN",
    "ADANIPORTS",
    "ADANIPOWER",
    "ATGL",
    "AWL",
    "ABCAPITAL",
    "ABFRL",
    "ABREL",
    "ABSLAMC",
    "AEGISLOG",
    "AFFLE",
    "AJANTPHARM",
    "AKUMS",
    "APLLTD",
    "ALKEM",
    "ALKYLAMINE",
    "ALOKINDS",
    "ARE&M",
    "AMBER",
    "AMBUJACEM",
    "ANANDRATHI",
    "ANANTRAJ",
    "ANGELONE",
    "APARINDS",
    "APOLLOHOSP",
    "APOLLOTYRE",
    "APTUS",
    "ACI",
    "ASAHIINDIA",
    "ASHOKLEY",
    "ASIANPAINT",
    "ASTERDM",
    "ASTRAZEN",
    "ASTRAL",
    "ATUL",
    "AUROPHARMA",
    "AVANTIFEED",
    "DMART",
    "AXISBANK",
    "BASF",
    "BEML",
    "BLS",
    "BSE",
    "BAJAJ-AUTO",
    "BAJFINANCE",
    "BAJAJFINSV",
    "BAJAJHLDNG",
    "BALAMINES",
    "BALKRISIND",
    "BALRAMCHIN",
    "BANDHANBNK",
    "BANKBARODA",
    "BANKINDIA",
    "MAHABANK",
    "BATAINDIA",
    "BAYERCROP",
    "BERGEPAINT",
    "BDL",
    "BEL",
    "BHARATFORG",
    "BHEL",
    "BPCL",
    "BHARTIARTL",
    "BHARTIHEXA",
    "BIKAJI",
    "BIOCON",
    "BIRLACORPN",
    "BSOFT",
    "BLUEDART",
    "BLUESTARCO",
    "BBTC",
    "BOSCHLTD",
    "BRIGADE",
    "BRITANNIA",
    "MAPMYINDIA",
    "CCL",
    "CESC",
    "CGPOWER",
    "CIEINDIA",
    "CRISIL",
    "CAMPUS",
    "CANFINHOME",
    "CANBK",
    "CAPLIPOINT",
    "CGCL",
    "CARBORUNIV",
    "CASTROLIND",
    "CEATLTD",
    "CELLO",
    "CENTRALBK",
    "CDSL",
    "CENTURYPLY",
    "CERA",
    "CHALET",
    "CHAMBLFERT",
    "CHEMPLASTS",
    "CHENNPETRO",
    "CHOLAHLDNG",
    "CHOLAFIN",
    "CIPLA",
    "CUB",
    "CLEAN",
    "COALINDIA",
    "COCHINSHIP",
    "COFORGE",
    "COLPAL",
    "CAMS",
    "CONCORDBIO",
    "CONCOR",
    "COROMANDEL",
    "CRAFTSMAN",
    "CREDITACC",
    "CROMPTON",
    "CUMMINSIND",
    "CYIENT",
    "DLF",
    "DOMS",
    "DABUR",
    "DALBHARAT",
    "DATAPATTNS",
    "DEEPAKFERT",
    "DEEPAKNTR",
    "DELHIVERY",
    "DEVYANI",
    "DIVISLAB",
    "DIXON",
    "LALPATHLAB",
    "DRREDDY",
    "EIDPARRY",
    "EIHOTEL",
    "EASEMYTRIP",
    "EICHERMOT",
    "ELECON",
    "ELGIEQUIP",
    "EMAMILTD",
    "EMCURE",
    "ENDURANCE",
    "ENGINERSIN",
    "EQUITASBNK",
    "ERIS",
    "ESCORTS",
    "EXIDEIND",
    "NYKAA",
    "FEDERALBNK",
    "FACT",
    "FINEORG",
    "FINCABLES",
    "FINPIPE",
    "FSL",
    "FIVESTAR",
    "FORTIS",
    "GRINFRA",
    "GAIL",
    "GVT&D",
    "GMRAIRPORT",
    "GRSE",
    "GICRE",
    "GILLETTE",
    "GLAND",
    "GLAXO",
    "GLENMARK",
    "MEDANTA",
    "GODIGIT",
    "GPIL",
    "GODFRYPHLP",
    "GODREJAGRO",
    "GODREJCP",
    "GODREJIND",
    "GODREJPROP",
    "GRANULES",
    "GRAPHITE",
    "GRASIM",
    "GESHIP",
    "GRINDWELL",
    "GAEL",
    "FLUOROCHEM",
    "GUJGASLTD",
    "GMDCLTD",
    "GNFC",
    "GPPL",
    "GSFC",
    "GSPL",
    "HEG",
    "HBLPOWER",
    "HCLTECH",
    "HDFCAMC",
    "HDFCBANK",
    "HDFCLIFE",
    "HFCL",
    "HAPPSTMNDS",
    "HAVELLS",
    "HEROMOTOCO",
    "HSCL",
    "HINDALCO",
    "HAL",
    "HINDCOPPER",
    "HINDPETRO",
    "HINDUNILVR",
    "HINDZINC",
    "POWERINDIA",
    "HOMEFIRST",
    "HONASA",
    "HONAUT",
    "HUDCO",
    "ICICIBANK",
    "ICICIGI",
    "ICICIPRULI",
    "ISEC",
    "IDBI",
    "IDFCFIRSTB",
    "IFCI",
    "IIFL",
    "INOXINDIA",
    "IRB",
    "IRCON",
    "ITC",
    "ITI",
    "INDGN",
    "INDIACEM",
    "INDIAMART",
    "INDIANB",
    "IEX",
    "INDHOTEL",
    "IOC",
    "IOB",
    "IRCTC",
    "IRFC",
    "IREDA",
    "IGL",
    "INDUSTOWER",
    "INDUSINDBK",
    "NAUKRI",
    "INFY",
    "INOXWIND",
    "INTELLECT",
    "INDIGO",
    "IPCALAB",
    "JBCHEPHARM",
    "JKCEMENT",
    "JBMA",
    "JKLAKSHMI",
    "JKTYRE",
    "JMFINANCIL",
    "JSWENERGY",
    "JSWINFRA",
    "JSWSTEEL",
    "JPPOWER",
    "J&KBANK",
    "JINDALSAW",
    "JSL",
    "JINDALSTEL",
    "JIOFIN",
    "JUBLFOOD",
    "JUBLINGREA",
    "JUBLPHARMA",
    "JWL",
    "JUSTDIAL",
    "JYOTHYLAB",
    "JYOTICNC",
    "KPRMILL",
    "KEI",
    "KNRCON",
    "KPITTECH",
    "KSB",
    "KAJARIACER",
    "KPIL",
    "KALYANKJIL",
    "KANSAINER",
    "KARURVYSYA",
    "KAYNES",
    "KEC",
    "KFINTECH",
    "KIRLOSBROS",
    "KIRLOSENG",
    "KOTAKBANK",
    "KIMS",
    "LTF",
    "LTTS",
    "LICHSGFIN",
    "LTIM",
    "LT",
    "LATENTVIEW",
    "LAURUSLABS",
    "LEMONTREE",
    "LICI",
    "LINDEINDIA",
    "LLOYDSME",
    "LUPIN",
    "MMTC",
    "MRF",
    "LODHA",
    "MGL",
    "MAHSEAMLES",
    "M&MFIN",
    "M&M",
    "MAHLIFE",
    "MANAPPURAM",
    "MRPL",
    "MANKIND",
    "MARICO",
    "MARUTI",
    "MASTEK",
    "MFSL",
    "MAXHEALTH",
    "MAZDOCK",
    "METROBRAND",
    "METROPOLIS",
    "MINDACORP",
    "MSUMI",
    "MOTILALOFS",
    "MPHASIS",
    "MCX",
    "MUTHOOTFIN",
    "NATCOPHARM",
    "NBCC",
    "NCC",
    "NHPC",
    "NLCINDIA",
    "NMDC",
    "NSLNISP",
    "NTPC",
    "NH",
    "NATIONALUM",
    "NAVINFLUOR",
    "NESTLEIND",
    "NETWEB",
    "NETWORK18",
    "NEWGEN",
    "NAM-INDIA",
    "NUVAMA",
    "NUVOCO",
    "OBEROIRLTY",
    "ONGC",
    "OIL",
    "OLECTRA",
    "PAYTM",
    "OFSS",
    "POLICYBZR",
    "PCBL",
    "PIIND",
    "PNBHOUSING",
    "PNCINFRA",
    "PTCIL",
    "PVRINOX",
    "PAGEIND",
    "PATANJALI",
    "PERSISTENT",
    "PETRONET",
    "PFIZER",
    "PHOENIXLTD",
    "PIDILITIND",
    "PEL",
    "PPLPHARMA",
    "POLYMED",
    "POLYCAB",
    "POONAWALLA",
    "PFC",
    "POWERGRID",
    "PRAJIND",
    "PRESTIGE",
    "PGHH",
    "PNB",
    "QUESS",
    "RRKABEL",
    "RBLBANK",
    "RECLTD",
    "RHIM",
    "RITES",
    "RADICO",
    "RVNL",
    "RAILTEL",
    "RAINBOW",
    "RAJESHEXPO",
    "RKFORGE",
    "RCF",
    "RATNAMANI",
    "RTNINDIA",
    "RAYMOND",
    "REDINGTON",
    "RELIANCE",
    "ROUTE",
    "SBFC",
    "SBICARD",
    "SBILIFE",
    "SJVN",
    "SKFINDIA",
    "SRF",
    "SAMMAANCAP",
    "MOTHERSON",
    "SANOFI",
    "SAPPHIRE",
    "SAREGAMA",
    "SCHAEFFLER",
    "SCHNEIDER",
    "SCI",
    "SHREECEM",
    "RENUKA",
    "SHRIRAMFIN",
    "SHYAMMETL",
    "SIEMENS",
    "SIGNATURE",
    "SOBHA",
    "SOLARINDS",
    "SONACOMS",
    "SONATSOFTW",
    "STARHEALTH",
    "SBIN",
    "SAIL",
    "SWSOLAR",
    "SUMICHEM",
    "SPARC",
    "SUNPHARMA",
    "SUNTV",
    "SUNDARMFIN",
    "SUNDRMFAST",
    "SUPREMEIND",
    "SUVENPHAR",
    "SUZLON",
    "SWANENERGY",
    "SYNGENE",
    "SYRMA",
    "TBOTEK",
    "TVSMOTOR",
    "TVSSCS",
    "TANLA",
    "TATACHEM",
    "TATACOMM",
    "TCS",
    "TATACONSUM",
    "TATAELXSI",
    "TATAINVEST",
    "TATAMOTORS",
    "TATAPOWER",
    "TATASTEEL",
    "TATATECH",
    "TTML",
    "TECHM",
    "TECHNOE",
    "TEJASNET",
    "NIACL",
    "RAMCOCEM",
    "THERMAX",
    "TIMKEN",
    "TITAGARH",
    "TITAN",
    "TORNTPHARM",
    "TORNTPOWER",
    "TRENT",
    "TRIDENT",
    "TRIVENI",
    "TRITURBINE",
    "TIINDIA",
    "UCOBANK",
    "UNOMINDA",
    "UPL",
    "UTIAMC",
    "UJJIVANSFB",
    "ULTRACEMCO",
    "UNIONBANK",
    "UBL",
    "UNITDSPR",
    "USHAMART",
    "VGUARD",
    "VIPIND",
    "DBREALTY",
    "VTL",
    "VARROC",
    "VBL",
    "MANYAVAR",
    "VEDL",
    "VIJAYA",
    "VINATIORGA",
    "IDEA",
    "VOLTAS",
    "WELCORP",
    "WELSPUNLIV",
    "WESTLIFE",
    "WHIRLPOOL",
    "WIPRO",
    "YESBANK",
    "ZFCVINDIA",
    "ZEEL",
    "ZENSARTECH",
    "ZOMATO",
    "ZYDUSLIFE",
    "ECLERX"
];

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

// Import JSON file
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const instruAll = await import(path.join(__dirname, '../../appv3/public/instruments/instrumentsAll.json'), {
  assert: { type: "json" }
}).then(module => module.default);


// Filter objects whose tradingSymbol exists in nifty500Symbols
const filteredInstruments = instruAll.filter(instru =>
  nifty500.includes(instru.tradingsymbol)
);

// Write to a JSON file
fs.promises.writeFile("nifty500.json", JSON.stringify(filteredInstruments, null, 4))
  .then(() => {
    console.log("Filtered data saved to nifty500.json");
  })
  .catch(err => {
    console.error("Error writing to file:", err);
  });


